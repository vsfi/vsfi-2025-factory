<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{.title}}</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Righteous&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header class="dashboard-header">
            <div class="header-left">
                <h1>–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è –ø–ª—é–º–±—É—Å–æ–≤</h1>
            </div>
            <div class="header-right">
                <div class="user-info">
                    <span class="welcome-text">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å,</span>
                    <span class="username">{{.user.Username}}</span>
                </div>
                <nav>
                    <a href="/auth/logout" class="btn btn-secondary">–í—ã–π—Ç–∏</a>
                </nav>
            </div>
        </header>

        <main class="dashboard-main">
            <div class="generator-section">
                <h2>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø–ª—é–º–±—É—Å</h2>
                <form id="plumbus-form" class="plumbus-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="name">–ù–∞–∑–≤–∞–Ω–∏–µ –ø–ª—é–º–±—É—Å–∞:</label>
                            <input type="text" id="name" name="name" required placeholder="–ú–æ–π —Å—É–ø–µ—Ä –ø–ª—é–º–±—É—Å">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="size">–†–∞–∑–º–µ—Ä:</label>
                            <select id="size" name="size" required>
                                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–º–µ—Ä</option>
                                <option value="nano">–ù–∞–Ω–æ</option>
                                <option value="XS">XS</option>
                                <option value="S">S</option>
                                <option value="M">M</option>
                                <option value="L">L</option>
                                <option value="XL">XL</option>
                                <option value="XXL">XXL</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="color">–¶–≤–µ—Ç:</label>
                            <select id="color" name="color" required>
                                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ü–≤–µ—Ç</option>
                                <option value="pink">–†–æ–∑–æ–≤—ã–π</option>
                                <option value="deep_pink">–¢—ë–º–Ω–æ-—Ä–æ–∑–æ–≤—ã–π</option>
                                <option value="red">–ö—Ä–∞—Å–Ω—ã–π</option>
                                <option value="blue">–°–∏–Ω–∏–π</option>
                                <option value="green">–ó–µ–ª—ë–Ω—ã–π</option>
                                <option value="yellow">–ñ—ë–ª—Ç—ã–π</option>
                                <option value="purple">–§–∏–æ–ª–µ—Ç–æ–≤—ã–π</option>
                                <option value="orange">–û—Ä–∞–Ω–∂–µ–≤—ã–π</option>
                                <option value="cyan">–¶–∏–∞–Ω</option>
                                <option value="lime">–õ–∞–π–º</option>
                                <option value="teal">–ë–∏—Ä—é–∑–æ–≤—ã–π</option>
                                <option value="brown">–ö–æ—Ä–∏—á–Ω–µ–≤—ã–π</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="shape">–§–æ—Ä–º–∞:</label>
                            <select id="shape" name="shape" required>
                                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ä–º—É</option>
                                <option value="smooth">–ì–ª–∞–¥–∫–∞—è</option>
                                <option value="uglovatiy">–£–≥–ª–æ–≤–∞—Ç–∞—è</option>
                                <option value="multi-uglovatiy">–ú—É–ª—å—Ç–∏-—É–≥–ª–æ–≤–∞—Ç–∞—è</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="weight">–í–µ—Å:</label>
                            <select id="weight" name="weight" required>
                                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≤–µ—Å</option>
                                <option value="ultralight">–°–≤–µ—Ä—Ö–ª—ë–≥–∫–∏–π</option>
                                <option value="light">–õ—ë–≥–∫–∏–π</option>
                                <option value="medium">–°—Ä–µ–¥–Ω–∏–π</option>
                                <option value="heavy">–¢—è–∂—ë–ª—ã–π</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="wrapping">–£–ø–∞–∫–æ–≤–∫–∞:</label>
                            <select id="wrapping" name="wrapping" required>
                                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —É–ø–∞–∫–æ–≤–∫—É</option>
                                <option value="default">–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è</option>
                                <option value="gift">–ü–æ–¥–∞—Ä–æ—á–Ω–∞—è</option>
                                <option value="limited">–õ–∏–º–∏—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è</option>
                            </select>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary btn-generate">
                        <span class="btn-text">–°–æ–∑–¥–∞—Ç—å –ø–ª—é–º–±—É—Å</span>
                        <div class="btn-glow"></div>
                    </button>
                </form>

                <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä -->
                <div id="progress-container" class="progress-container" style="display: none;">
                    <h3>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–ª—é–º–±—É—Å–∞...</h3>
                    <div class="progress-bar">
                        <div class="progress-fill"></div>
                        <div class="progress-text">0%</div>
                    </div>
                    <div class="portal-loading"></div>
                </div>
            </div>

            <div class="collection-section">
                <h2>–í–∞—à–∞ –∫–æ–ª–ª–µ–∫—Ü–∏—è –ø–ª—é–º–±—É—Å–æ–≤</h2>
                <div id="plumbus-grid" class="plumbus-grid">
                    {{range .plumbuses}}
                    <div class="plumbus-card{{if .IsRare}} rare{{end}}" data-status="{{.Status}}">
                        <div class="card-header">
                            <h3>{{.Name}}
                                {{if .IsRare}}
                                <span class="rare-badge" title="–ú–µ–≥–∞ —Ä–µ–¥–∫–∏–π –ø–ª—é–º–±—É—Å!">‚ú®</span>
                                {{end}}
                            </h3>
                            <span class="status status-{{.Status}}">{{.Status}}</span>
                        </div>
                        <div class="card-content">
                            {{if eq .Status "completed"}}
                                <img src="/plumbus/image/{{.ID}}" alt="{{.Name}}" class="plumbus-image clickable-image" onclick="openImageModal('/plumbus/image/{{.ID}}', '{{.Name}}')">
                            {{else if eq .Status "generating"}}
                                <div class="generating-animation"></div>
                            {{else if eq .Status "failed"}}
                                <div class="error-message">–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏</div>
                            {{else}}
                                <div class="pending-message">–û–∂–∏–¥–∞–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏</div>
                            {{end}}
                        </div>
                        <div class="card-details">
                            <p><strong>–†–∞–∑–º–µ—Ä:</strong> <span class="card-size">{{if .Size}}{{.Size}}{{else}}–ù–µ —É–∫–∞–∑–∞–Ω{{end}}</span></p>
                            <p><strong>–¶–≤–µ—Ç:</strong> <span class="card-color" data-color="{{.Color}}">{{if .Color}}{{.Color}}{{else}}–ù–µ —É–∫–∞–∑–∞–Ω{{end}}</span></p>
                            <p><strong>–§–æ—Ä–º–∞:</strong> <span class="card-shape" data-shape="{{.Shape}}">{{if .Shape}}{{.Shape}}{{else}}–ù–µ —É–∫–∞–∑–∞–Ω–∞{{end}}</span></p>
                            {{if .Signature}}
                            <div class="signature-info">
                                <p><strong>üîí –ü–æ–¥–ø–∏—Å—å:</strong> <span class="signature-hash" title="{{.Signature}}" data-full-signature="{{.Signature}}">{{.Signature}}</span></p>
                                {{if .SignatureDate}}<p><strong>üìÖ –ü–æ–¥–ø–∏—Å–∞–Ω–æ:</strong> <span class="signature-date">{{.SignatureDate.Format "02.01.2006 15:04"}}</span></p>{{end}}
                                <div class="signature-verified">‚úÖ –ü–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞</div>
                            </div>
                            {{end}}
                        </div>
                    </div>
                    {{end}}
                </div>
            </div>
        </main>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ -->
    <div id="imageModal" class="modal" onclick="closeImageModal()">
        <div class="modal-content">
            <span class="close" onclick="closeImageModal()">&times;</span>
            <img id="modalImage" class="modal-image" alt="">
            <div class="modal-caption" id="modalCaption"></div>
        </div>
    </div>

    <script src="/static/js/dashboard.js"></script>
</body>
</html> 